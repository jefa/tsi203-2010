<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">



<ui:composition template="templates/superusuarioUI.xhtml">
	<ui:define name="title">Modificar Album</ui:define>
	<ui:define name="styles">
	.main-aside {width:300px;}
	#container {width:660px;}
	#content {width:660px;} 
	</ui:define>

	<ui:define name="body">
		<script type="text/javascript" src="scripts/documentation.js"></script>

		<h:panelGroup id="panelEvento">
			<div id="index-featured2">
			<ul class="hfeed posts-quick clearfix">
				<li class="post type-post clearfix">
				<div class="entry-thumbnails"><h:graphicImage
					value="/ContentFeeder?id=#{eventoMB.evento.coverId}&#38;thb=115"
					styleClass="attachment-quick-preview-thumb wp-post-image" /></div>
				<h3 class="entry-title">Album del evento #{eventoMB.evento.evtName}</h3>
				<div class="entry-summary">
				<div class="entry-info"><abbr class="published">#{eventoMB.evento.formattedDate}</abbr>
				</div>
				<div class="entry-info"><abbr class="published">#{eventoMB.evento.description}</abbr>
				</div>
				<h:inputHidden id="hiddenHashtag" value="#{eventoMB.evento.hashtag}" />
				</div>
				</li>
			</ul>
			<!-- .posts-quick --></div>
			<!-- #index-featured2 -->
		</h:panelGroup>

		<h:panelGroup id="AlbumFinalized" rendered="#{eventoMB.isAlbumFinalized}">
			<h:outputText>No puede realizar modificaciones sobre albums finalizados</h:outputText>
			<br />
		</h:panelGroup>
		
		<h:panelGroup id="NotAlbumFinalized" rendered="#{!eventoMB.isAlbumFinalized}">			
			<a4j:outputPanel id="panelNoContents" rendered="#{eventoMB.contentsCount == 0}">
			No se han encontrado contenidos. Por favor ingrese a la galería del evento y agregue contenidos al album.
			</a4j:outputPanel>
			
			<a4j:outputPanel id="panelThumbs" rendered="#{eventoMB.contentsCount > 0}">
				<a4j:form id="formThumb">
					<rich:dataGrid value="#{eventoMB.selectedCategory.contents}"
						columns="#{eventoMB.contentsCount}" var="content" rowKeyVar="rk">
						<a4j:commandLink action="#{eventoMB.updateContent}"
							reRender="panelContent">
							<f:setPropertyActionListener value="#{content.contId}"
								target="#{eventoMB.contentId}" />
							<h:graphicImage alt="Title"
								value="/ContentFeeder?id=#{content.contId}&#38;thb=75" />
						</a4j:commandLink>
					</rich:dataGrid>
					<h:outputText value="#{eventoMB.selectedCategory.category}" />		
				</a4j:form>
			</a4j:outputPanel>
			<a4j:outputPanel id="panelContent" rendered="#{eventoMB.contentsCount > 0}">
				<h:form>
					<h:outputText value="#{eventoMB.selectedContent.contId}" />
					<h:panelGroup id="mainImage" layout="block">
						<h:column>
							<h:panelGroup id="tagContentPanel">
								<h:graphicImage value="/ContentFeeder?id=#{eventoMB.contentId}" />
							</h:panelGroup>
						</h:column>
					</h:panelGroup>
					<h:outputText value="#{eventoMB.selectedContent.posAlbum}" />
					<a4j:outputPanel id="moverPosAtras" rendered="#{eventoMB.selectedContent.posAlbum > 0}">
						<a4j:commandButton value="Atras" action="#{eventoMB.moverUnaPosAtras}" reRender="panelThumbs, panelContent"/>
					</a4j:outputPanel>
					<a4j:outputPanel id="moverPosAdelante" rendered="#{(eventoMB.contentsCount - 1) > eventoMB.selectedContent.posAlbum}">
						<a4j:commandButton value="Adelante" action="#{eventoMB.moverUnaPosAdelante}" reRender="panelThumbs, panelContent"/>
					</a4j:outputPanel>
				
					<a4j:commandButton value="Publicar Album" onclick="if (!window.confirm('¿Confirma que desea publicar el Album? Una vez finalizado no podrá editarse')) {return false}" 
					action="#{eventoMB.finalizarAlbum}" styleClass="featured-article"/>
				
				</h:form>
			</a4j:outputPanel>
		</h:panelGroup>
	</ui:define>
</ui:composition>
</html>