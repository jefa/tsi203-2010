<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">

<ui:composition template="templates/usuarioUI.xhtml">
	<ui:define name="title">Pagina Inicio</ui:define>
	<ui:define name="styles">
	.main-aside {width:300px;}
	#container {width:660px;}
	#content {width:660px;} 
	</ui:define>
	<ui:define name="body">
		<script type="text/javascript" src="scripts/jquery.cycle.min.js"></script>
		<h:form id="albumsRecientes">
			<div class="featured clearfix">
			<div id="controls"><a href="" class="prev">Prev</a> <a href=""
				class="next">Next</a></div>
			<div id="featured-slideshow" style="height: 250px;margin-bottom:20px"><a4j:repeat
				var="album" value="#{paginaInicioMB.albumsRecientes}">

				<div class="featured-slideshow-inner"
					style="position: absolute; top: 0px; left: 0px; width: 640px; height: 250px; z-index: 4; opacity: 0; display: none;">

				<a href="AlbumFeeder?evtid=#{album.event.evtId}" class="featured-article">
					
						
						<div style="background-color:#000;background-position:top center;background-repeat:no-repeat;width:640px;height:250px;background-image:url('ContentFeeder?id=#{album.event.coverId}&#38;thb=H640')"
												class="attachment-featured-slideshow-thumb wp-post-image"></div>

</a>				


				<div class="featured-entry">
					<a href="AlbumFeeder?evtid=#{album.event.evtId}" class="entry-title">#{album.event.evtName}</a>

				<div class="entry-summary">
				<p>#{album.event.description}</p>
				</div>
				<div class="progress"></div>
				</div>
				</div>

			</a4j:repeat></div>
			</div>
			<script>
//<![CDATA[
jQuery('#featured-slideshow').cycle({
	fx: 'fade',
	speed: 250,
	next: '#controls .next',
	prev: '#controls .prev',
	timeout: 6000,
	pause: 1,
	slideExpr: '.featured-slideshow-inner',
	height: '250px'
});
//]]>

</script>
		</h:form>
		<h:form id="formMisEventos" rendered="#{paginaInicioMB.isUserLogged}">
			<div id="index-featured1">
			<div class="home-title">Mis Eventos Recientes</div>
			
			<ul class="hfeed posts-default clearfix" style="margin-bottom:0px">
				<a4j:repeat  var="evento"
					value="#{paginaInicioMB.misEventosRecientes}">
					<li class="post type-post clearfix">
					<div class="entry-thumbnails"><h:commandLink
						action="verEvento" styleClass="entry-thumbnails-link">
						<f:setPropertyActionListener value="#{evento.evtId}"
							target="#{eventoMB.eventId}" />

<div style="background-color:#000;background-position:top center;background-repeat:no-repeat;width:195px;height:110px;background-image:url('ContentFeeder?id=#{evento.coverId}&#38;thb=H195')"
												class="attachment-node-based-thumb wp-post-image"></div>


						<span class="entry-meta"> <abbr class="published">#{evento.formattedDate}</abbr>
						</span>
					</h:commandLink></div>
					<h3 class="entry-title"><h:commandLink
						value="#{evento.evtName}" action="verEvento">
						<f:setPropertyActionListener value="#{evento.evtId}"
							target="#{eventoMB.eventId}" />
					</h:commandLink></h3>
					</li>
				</a4j:repeat>
			</ul>
			
<a4j:outputPanel rendered="#{paginaInicioMB.totalPaginas != 1}"> <div class="wp-pagenavi">
<span class="pages">Pag. #{paginaInicioMB.paginaActual + 1} de #{paginaInicioMB.totalPaginas}</span>
<a4j:repeat  var="pagina" value="#{paginaInicioMB.paginas}">
	<h:outputText value="#{pagina + 1}" rendered="#{pagina == paginaInicioMB.paginaActual}" styleClass="current"/>
	<h:commandLink value="#{pagina + 1}" rendered="#{pagina != paginaInicioMB.paginaActual}">
		<f:setPropertyActionListener value="#{pagina}" target="#{paginaInicioMB.paginaActual}" />
	</h:commandLink>
</a4j:repeat>
</div>
</a4j:outputPanel>
			
			<!-- .posts-default --></div>
			<!-- #index-featured1 -->
		</h:form>

		<h:form id="eventosRecientes">
			<div id="index-featured2">
			<div class="home-title">Eventos Recientes</div>
			<ul class="hfeed posts-quick clearfix">
				<a4j:repeat var="evento" value="#{paginaInicioMB.eventosRecientes}">
					<li class="post type-post clearfix">
					<div class="entry-thumbnails"><h:commandLink
						action="verEvento" styleClass="entry-thumbnails-link">
						<f:setPropertyActionListener value="#{evento.evtId}"
							target="#{eventoMB.eventId}" />

						<h:graphicImage
							value="/ContentFeeder?id=#{evento.coverId}&#38;thb=115"
							styleClass="attachment-quick-preview-thumb wp-post-image" />
					</h:commandLink></div>
					<h3 class="entry-title"><h:commandLink
						value="#{evento.evtName}" action="verEvento">
						<f:setPropertyActionListener value="#{evento.evtId}"
							target="#{eventoMB.eventId}" />
					</h:commandLink></h3>
					<div class="entry-summary">
					<div class="entry-info"><abbr class="published">#{evento.formattedDate}
					</abbr></div>
					#{evento.description}
					<p class="quick-read-more"><h:commandLink value="Ver evento..."
						action="verEvento">
						<f:setPropertyActionListener value="#{evento.evtId}"
							target="#{eventoMB.eventId}" />
					</h:commandLink></p>
					</div>
					</li>
				</a4j:repeat>
			</ul>
			<!-- .posts-quick --></div>
			<!-- #index-featured2 -->

		</h:form>







	</ui:define>
	<ui:define name="sidebar">
		<ul class="xoxo" id="ulSidebar">
			<h:form id="formNotifications"
				rendered="#{paginaInicioMB.isUserLogged}">
				<li id="theme-switch" class="widgetcontainer clearfix">
				<h5 class="widgettitle">Notificaciones</h5>
				<a4j:outputPanel id="output">
					<rich:dataList var="resultado"
						rendered="#{not empty paginaInicioMB.misNotificacionesNoLeidas}"
						value="#{paginaInicioMB.misNotificacionesNoLeidas}" rows="10">
						<h:outputText value="Fecha: "></h:outputText>
						<h:outputText value="#{resultado.formattedDate}"></h:outputText>
						<br />
						<h:outputText rendered="#{resultado.type eq 2}" value="Notificacion: #{resultado.subject}"></h:outputText>
						<h:outputText rendered="#{resultado.type eq 1}" value="Mensaje de #{resultado.userFrom}: #{resultado.subject}"></h:outputText>
						<br />
					</rich:dataList>
					<h:outputText value="No unread notifications"
						style="font-style:italic"
						rendered="#{empty paginaInicioMB.misNotificacionesNoLeidas}" />
				</a4j:outputPanel></li>
			</h:form>

			<li class="multi-sidebar-container">
			<div
				class="multi-sidebar clearfix ui-tabs ui-widget ui-widget-content ui-corner-all">
			<script type="">
			function toggleTab(control, tab)
			{
				jQuery('div.ui-tabs-panel').addClass('ui-tabs-hide');
				jQuery('#' + control).fadeIn();
				jQuery('#' + control).removeClass('ui-tabs-hide');
				jQuery('ul.ui-tabs-nav li').removeClass('ui-tabs-selected ui-state-active');
				jQuery(tab.parentNode).addClass('ui-tabs-selected ui-state-active');
			}
			</script>
			<ul
				class="tabs clearfix ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li
					class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a
					href="javascript:null()" onclick="toggleTab('s-calificadas',this)"><span>Mejor
				calificadas</span></a></li>
				<li class="ui-state-default ui-corner-top"><a
					href="javascript:null()" onclick="toggleTab('s-comentadas',this)"><span>Mas
				comentadas</span></a></li>
				<li class="ui-state-default ui-corner-top"><a
					href="javascript:null()" onclick="toggleTab('s-figureti',this)"><span>Figureti</span></a></li>

			</ul>
			<div id="s-calificadas"
				class="widgetcontainer clearfix ui-tabs-panel ui-widget-content ui-corner-bottom">


			<h:form id="fotosMejorCalificadas">
				<a4j:repeat var="contenido" rowKeyVar="rk" rows="5"
					value="#{paginaInicioMB.fotosMejorCalificadas}">
					<li id="rating" class="clearfix Clear"><span class="thumb" style="height: 36px"><h:graphicImage
						value="/ContentFeeder?bestRanked=1&#38;pos=#{rk+1}&#38;thb=36"
						styleClass="attachment-sidebar-thumb wp-post-image" width="36px"
						height="36px" /></span> <h:commandLink value="#{contenido.eventName}"
						action="verEvento">
						<f:setPropertyActionListener value="#{contenido.eventId}"
							target="#{eventoMB.eventId}" />
					</h:commandLink> <br />
					<span class="sub">
						<input type="radio" class="hover-star {half:true}"
							name="globalRating" value="0.5" />
						<input type="radio" class="hover-star {half:true}"
							name="globalRating" value="1" />
						<input type="radio" class="hover-star {half:true}"
							name="globalRating" value="1.5" />
						<input type="radio" class="hover-star {half:true}"
							name="globalRating" value="2" />
						<input type="radio" class="hover-star {half:true}"
							name="globalRating" value="2.5" />
						<input type="radio" class="hover-star {half:true}"
							name="globalRating" value="3" />
						<input type="radio" class="hover-star {half:true}"
							name="globalRating" value="3.5" />
						<input type="radio" class="hover-star {half:true}"
							name="globalRating" value="4" />
						<input type="radio" class="hover-star {half:true}"
							name="globalRating" value="4.5" />
						<input type="radio" class="hover-star {half:true}"
							name="globalRating" value="5" />
						<rich:jQuery selector="#rating .hover-star"
							query="rating({}).rating('select', #{contenido.avgScore} + '').rating('readOnly', true);"></rich:jQuery>
					</span></li>
				</a4j:repeat>
			</h:form></div>

			<div id="s-comentadas"
				class="widgetcontainer clearfix ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide">
			<h:form id="fotosMasComentadas">
				<a4j:repeat var="contenido" rowKeyVar="rk"
					value="#{paginaInicioMB.fotosMasComentadas}" rows="5">
					<li class="clearfix"><span class="thumb" style="height: 36px"><h:graphicImage
						value="/ContentFeeder?mostCommented=1&#38;pos=#{rk+1}&#38;thb=36"
						styleClass="attachment-sidebar-thumb wp-post-image" width="36px"
						height="36px" /></span> <h:commandLink value="#{contenido.eventName}"
						action="verEvento">
						<f:setPropertyActionListener value="#{contenido.eventId}"
							target="#{eventoMB.eventId}" />
					</h:commandLink> <br />
					<span class="sub"><strong>Comentarios:</strong>
					#{fn:length(contenido.comments)}</span></li>
				</a4j:repeat>
			</h:form></div>
			<div id="s-figureti"
				class="widgetcontainer clearfix ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide">

			<h:form id="usuariosMasTaggeados">
				<a4j:repeat var="usuarioTaggeado" rowKeyVar="rk" rows="5"
					value="#{paginaInicioMB.usuariosMasTaggeados}">
					<li class="clearfix"><span class="thumb" style="height: 36px"><h:graphicImage
						value="/UserImageFeeder?mostTagged=1&#38;pos=#{rk+1}&#38;thb=36"
						styleClass="attachment-sidebar-thumb wp-post-image" width="36px"
						height="36px" /></span><h:commandLink
						value="#{usuarioTaggeado.user.name}" action="verPerfil">
						<f:setPropertyActionListener
							value="#{usuarioTaggeado.user.username}"
							target="#{PublicProfile.userId}" />
					</h:commandLink><br />
					<span class="sub"><strong>Taggedo en: </strong> <h:outputText
						value="#{usuarioTaggeado.cantTags} contenidos"></h:outputText></span></li>
				</a4j:repeat>
			</h:form></div>
			</div>
			</li>

			<li id="calendar-3" class="widgetcontainer clearfix">
			<h5 class="widgettitle">Calendario</h5>
			<div id="calendar_wrap"><rich:calendar popup="false"
				style="width:100%" showFooter="false" showWeeksBar="false"
				firstWeekDay="1" locale="es" readonly="true" /></div>
			</li>
		</ul>
	</ui:define>

</ui:composition>
</html>