<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:richx="http://richfaces.org/richx">

	<ui:include src="/templates/image/imageScroller.xhtml" />

	<br clear="all" />
	<h:panelGroup id="mainImage" layout="block" styleClass="mainImage-div">
		<table cellpadding="0" class="mainImage-table">
			<tr>
				<td class="mainImage-table-col1" rowspan="2">
					<h:graphicImage
						value="/ContentFeeder?eventID=#{eventoMB.evento.evtId}&#38;username=#{loginMB.userName}&#38;id=#{eventoMB.content.contId}" />
				</td>
			</tr>
		</table>
		<h:inputText id="tag" value="#{tagSuggestionMB.suggest}" />
		<h:commandButton value="Etiquetar" action="#{tagSuggestionMB.tagUser}">
			<f:setPropertyActionListener value="#{eventoMB.content}"
				target="#{tagSuggestionMB.contenido}" />
			<f:setPropertyActionListener value="#{loginMB.userName}"
				target="#{tagSuggestionMB.username}" />
		</h:commandButton>
		<h:inputText value="#{tagSuggestionMB.tagX1}" id="x1" />
		<h:inputText value="#{tagSuggestionMB.tagX2}" id="x2" />
		<h:inputText value="#{tagSuggestionMB.tagY1}" id="y1" />
		<h:inputText value="#{tagSuggestionMB.tagY2}" id="y2" />
		<rich:suggestionbox id="suggestionBoxId" for="tag" tokens=",["
			suggestionAction="#{tagSuggestionMB.autocomplete}" var="result"
			nothingLabel="No user matches" columnClasses="center">
			<h:column>
				<h:outputText value="#{result.username}" />
			</h:column>
			<h:column>
				<h:outputText value="#{result.name}" />
			</h:column>
		</rich:suggestionbox>
	</h:panelGroup>
	<script type="text/javascript" src="scripts/jquery.imgareaselect.js"></script>
	<rich:jQuery selector="#mainImage img"
		query="imgAreaSelect({ onSelectEnd: function (img, selection) {
            $('input[name=x1]').val(selection.x1);
            $('input[name=y1]').val(selection.y1);
            $('input[name=x2]').val(selection.x2);
            $('input[name=y2]').val(selection.y2);
        } })" />
	<h:outputText styleClass="additional-info-text" value="AvgScore: " />
	<h:outputText value="#{eventoMB.content.avgScore}" />
	<br />
</ui:composition>